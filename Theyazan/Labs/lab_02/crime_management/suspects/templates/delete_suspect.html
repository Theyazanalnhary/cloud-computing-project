{% extends 'base.html' %}

{% block content %}
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <!-- بطاقة الحذف -->
            <div class="card shadow-lg border-danger">
                <div class="card-header bg-danger text-white text-center">
                    <i class="fas fa-exclamation-triangle fa-2x mb-3"></i>
                    <h3 class="mb-0">تأكيد عملية الحذف</h3>
                </div>
                <div class="card-body">
                    <!-- مقدمة النص -->
                    <p class="lead text-center text-muted mb-4">
                        هل أنت متأكد من رغبتك في حذف المتهم؟
                    </p>

                    <!-- معلومات المتهم -->
                    <div class="text-center">
                        <div class="avatar-icon mb-3">
                            <i class="fas fa-user-circle fa-5x text-danger"></i>
                        </div>
                        <h4 class="text-primary">{{ suspect.full_name }}</h4>
                        <p class="text-muted"><strong>رقم الهاتف:</strong> {{ suspect.phone }}</p>
                        <p class="text-muted"><strong>العمر:</strong> {{ suspect.age }}</p>
                    </div>

                    <!-- نموذج الحذف -->
                    <form method="post" class="text-center mt-4">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-danger btn-lg px-5 me-3">
                            <i class="fas fa-trash-alt me-2"></i> حذف
                        </button>
                        <a href="{% url 'suspects:suspect_list' %}" class="btn btn-secondary btn-lg px-5">
                            <i class="fas fa-times me-2"></i> إلغاء
                        </a>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- SweetAlert2 CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">

<!-- JavaScript Libraries -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<!-- تحسينات رسائل التأكيد والإشعارات -->
<script>
document.addEventListener('DOMContentLoaded', function () {
    // تحسين زر الحذف بإضافة تأكيد بصندوق حوار
    const deleteForm = document.querySelector('form');
    if (deleteForm) {
        deleteForm.addEventListener('submit', function (e) {
            e.preventDefault();
            Swal.fire({
                title: 'هل أنت متأكد؟',
                text: "لن تتمكن من استعادة هذه البيانات بعد الحذف!",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#d33',
                cancelButtonColor: '#6c757d',
                confirmButtonText: '<i class="fas fa-trash-alt me-2"></i> نعم، احذف!',
                cancelButtonText: '<i class="fas fa-times me-2"></i> إلغاء'
            }).then((result) => {
                if (result.isConfirmed) {
                    // إذا تم التأكيد، يتم إرسال النموذج
                    deleteForm.submit();
                }
            });
        });
    }
});
</script>
{% endblock %}